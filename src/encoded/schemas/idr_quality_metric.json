{
    "description": "Schema for reporting the 'Irreproducible Discovery Rate' (IDR) statistics",
    "id": "/profiles/idr_quality_metric.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "required": ["step_run","quality_metric_of"],
    "additionalProperties": false,
    "identifyingProperties": ["uuid"],
    "mixinProperties": [
        { "$ref": "mixins.json#/schema_version" },
        { "$ref": "quality_metric.json#/properties" },
        { "$ref": "mixins.json#/uuid" },
        { "$ref": "mixins.json#/submitted"},
        { "$ref": "mixins.json#/aliases" },
        { "$ref": "mixins.json#/standard_status"},
        { "$ref": "mixins.json#/assay" }
   ],
    "properties": {
        "schema_version": {
            "default": "1"
        },
        "attachments": {
            "description": "Non-accessioned files to be associated with this QC metric object",
            "type": "object",
            "properties": {
                "plots": {
                    "description": "IDR dispersion plots",
                    "type": "object",
                    "properties": {
                        "true":      { 
                            "description": "IDR dispersion plot for true replicates",
                            "$ref": "quality_metric.json#/properties/attachment" },
                        "rep1_pr":   { 
                            "description": "IDR dispersion plot for replicate 1 pseudoreplicates",
                            "$ref": "quality_metric.json#/properties/attachment" },
                        "rep2_pr":   {
                            "description": "IDR dispersoin plot for replicate 2 pseudoreplicates",
                            "$ref": "quality_metric.json#/properties/attachment" },
                        "pooled_pr": {
                            "description": "IDR dispersion plot for pooled pseudoreplicates",
                            "$ref": "quality_metric.json#/properties/attachment" }
                    }
                },
                "parameters": {
                    "description": "IDR run parameters",
                    "type": "object",
                    "properties": {
                        "true":      { 
                            "description": "IDR run parameters for true replicates",
                            "$ref": "quality_metric.json#/properties/attachment" },
                        "rep1_pr":   { 
                            "description": "IDR run parameters for replicate 1 pseudoreplicates",
                            "$ref": "quality_metric.json#/properties/attachment" },
                        "rep2_pr":   {
                            "description": "IDR run parameters for replicate 2 pseudoreplicates",
                            "$ref": "quality_metric.json#/properties/attachment" },
                        "pooled_pr": {
                            "description": "IDR run parameters for pooled pseudoreplicates",
                            "$ref": "quality_metric.json#/properties/attachment" }
                    }
                }
            }
        },
        "Np": {
            "type": "number",
            "description": "Number of peaks from pooled pseudoreplicates"
        },
        "Nt": {
            "type": "number",
            "description": "Number of peaks from true replicates"
        },
        "N1": {
            "type": "number",
            "description": "Number of peaks from replicate 1 self-pseudoreplicates"
        },
        "N2": {
            "type": "number",
            "description": "Number of peaks from replicate 2 self-pseudoreplicates"
        },
        "IDR_cutoff": {
            "type": "number",
            "description": "IDR cutoff threshold for this experiment"
        },
        "self_consistency_ratio": {
            "type": "number",
            "description": "IDR self-consistency ratio for this experiment"
        },
        "rescue_ratio": {
            "type": "number",
            "description": "IDR rescue ratio for this experiment"
        },
        "reproducibility_test": {
            "type": "string",
            "description": "IDR reproducibility test result for this experiment",
            "enum": [
                "pass",
                "borderline",
                "fail"]
        },
        "N_optimal": {
            "type": "number",
            "description": "Number of peaks in the IDR optimal set"
        },
        "N_conservative": {
            "type": "number",
            "description": "Number of peaks in the IDR conservative set"
        }
    }
}
