{
    "title": "ENCODE Experimental Dataset",
    "id": "/profiles/experiment.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "description": "Schema for submitting an primary set of files to ENCODE (Experiment)",
    "comment": "Experiment is a special case of Dataset",
    "type": "object",
    "required": [ "award", "lab", "dataset_type", "term_id"],
    "additionalProperties": false,
    "properties": {
         "accession": {
            "description": "ENCODE DCC assigned accession",
            "comments": "Not to be submitted or updated by non-admin users.",
            "title": "Dataset Accession",
            "type": "string",
            "format": "accession"
        },
        "description": {
            "default": "",
            "description": "A plain text description of the experimental dataset",
            "title": "Experiment Description",
            "type": "string"
        },
        "lab": {
            "default": "ENCODE Project",
            "description": "Submitting Lab",
            "comment": "Automatic submitters can supply a Lab UUID or Name",
            "title": "Lab",
            "type": "string",
            "format": "lab_link"
        },
        "award": {
            "default": "ENCODE",
            "description": "Award (Grant) this submission is registered under",
            "comment": "Automatic submitters can supply an Award UUID, name, or number",
            "title": "Award Name",
            "type": "string",
            "format": "award_link"
        },
        "target": {
            "description": "Protein, RNA, or chemical target of the experiment",
            "comment": "For automatic submission supply unique Target label or UUID",
            "title": "Target ID",
            "type": "string",
            "format": "target_link"
        },
        "assay_type": {
            "description": "Ontology term describing assay used for this replicate",
            "comment": "Use OBI ontology (term_id) or New Term Requst no. from DCC",
            "title": "Assay type",
            "type":  "string"
        },
        "term_id": {
            "description": "OBI Ontology term ID describing assay type",
            "title": "Assay (OBI) Ontology ID",
            "type": "string",
            "pattern": "^(OBI|NTR):[0-9]{7}$"
        },
        "dataset_type": {
            "default": "experiment",
            "description": "The Dataset type",
            "comment": "For Experiments this is always 'experiment'",
            "title": "Dataset Type",
            "type": {
                "enum": ["experiment"]
            }
        },
        "dbxref": {
            "default": {},
            "description": "List of Database (including Lab) cross-references",
            "additionalProperties": {
                "default": [],
                "description": "List of Database IDs",
                "title": "Database IDs",
                "type":  "array",
                "items": {
                    "description": "Database",
                    "title": "DB ID",
                    "type": "string"
                }
            },
            "title": "DBXREFs",
            "type": "object"
        },
        "documents": {
            "default": [],
            "description": "List of other experimental protocol documents",
            "comment": "For automatic submission supply unique Document names or uuids",
            "items": {
                "description": "Experimental protocol document",
                "title": "Document",
                "type": "string",
                "format": "document_link"
            },
            "title": "List of Documents",
            "type": "array"
        },
        "files": {
            "default": [],
            "description": "List of files in this dataset",
            "comment": "For automatic submission supply unique data File accessions or uuids",
            "items": {
                "description": "Data file",
                "title": "Files",
                "type": "string",
                "format": "file_link"
            },
            "title": "List of Data Files",
            "type": "array"
        },
         "references": {
            "default": [],
            "description": "List of references (Pubmed IDs)",
            "title": "References",
            "reference": {
                "description": "Pubmed id for a published reference",
                "title": "Pubmed Reference",
                "type": "string",
                "pattern": "^PMID:[0-9]+$"
            },
            "type": "array"
        },
        "possible_controls": {
            "default": [],
            "description": "List of control experiments that could apply to this experiment",
            "comment": "For automatic submission supply Experiment (dataset) accessions or uuids",
            "items": {
                "description": "Possible control experiment",
                "title": "Control",
                "type": "string",
                "format": "experiment_link"
            },
            "title": "List of Possible Control experiments",
            "type": "array"
        },
        "replicates": {
            "default": [],
            "description": "List Replicates in this Experimental dataset",
            "comment": "For automatic submission supply unique Replicate names or uuids",
            "items": {
                "description": "Experimental Replicate",
                "title": "Replicate",
                "type": "object",
                "required": ["biological_replicate_no", "technical_replicate_no", "library"],
                "additionalProperties": false,
                "properties": {
                    "antibody": {
                        "description": "Antibody used with this Replicate (-IP experiments only)",
                        "comment": "Automatic submitters can supply an Antibody accession or UUID",
                        "title": "Antibody",
                        "type": "string",
                        "format": "antibody_link"
                    },
                    "biological_replicate_no": {
                        "default": 1,
                        "description": "Biologically replicated experiments are numbered sequentially",
                        "title": "Replicate # (Biological)",
                        "type": "integer"
                    },
                    "technical_replicate_no": {
                        "default": 1,
                        "description": "Technically replicated experiments are numbered sequentially",
                        "title": "Replicate # (Technical)",
                        "type": "integer"
                    },
                    "library": {
                        "description": "Nucleic acid Library used in this replicate.",
                        "comment": "For automatic submission supply unique Library accession or UUID",
                        "title": "Library ID",
                        "type": "string",
                        "format": "library_link"
                    },
                    "platform": {
                        "description": "Platform (hardware) that this Replicate was performed on",
                        "comment": "For automatic submission supply unique Platform name or UUID",
                        "title": "Platform ID",
                        "type": "string",
                        "format": "platform_link"
                    },
                    "flowcell_details": {
                        "default": [],
                        "description": "Details about the machine/flowcell/lane information for this replicates",
                        "title": "Flowcell Details",
                        "type": "array",
                        "items": {
                            "description": "A machine:flowcell:lane triple",
                            "title": "Machine:Flowcells:Lanes",
                            "type": "object",
                            "additionalProperties": false,
                            "properties": {
                                "machine": {
                                    "description": "The friendly name of the specific machine platform",
                                    "title": "Machine name",
                                    "type": "string"
                                },
                                "flowcell": {
                                    "description": "The identifier of flowcell",
                                    "title": "Flowcell ID",
                                    "type": "string"
                                },
                                "lane": {
                                    "description": "The identifier of the lane used",
                                    "title": "Lane",
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            },
            "title": "List of Replicates",
            "type": "array"
        }
    }
}