{
    "description": "Schema for submitting a computational analysis that transforms input files to output files.",
    "id": "/profiles/analysis_step.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "required": ["analysis_step_type", "software_versions", "input_file_types"],
    "additionalProperties": false,
    "identifyingProperties": ["uuid", "aliases"],
    "mixinProperties": [
        { "$ref": "mixins.json#/schema_version" },
        { "$ref": "mixins.json#/aliases" },
        { "$ref": "mixins.json#/uuid" },
        { "$ref": "mixins.json#/submitted"}
    ],
    "properties": {
        "schema_version": {
            "default": "1"
        },
        "analysis_step_types": {
            "title": "Types",
             "description": "The classification of the software",
             "type": "array",
	     "items": {
	     	"title": "Type",
		"type": "string",
             	"enum": [
                    "filtering",
                    "file format conversion",
                    "QA calculation",
                    "peak calling",
                    "IDR",
                    "aligner"
             	]
	     }
        },
        "software_versions": {
            "title": "Software version",
            "description": "The software version used in the analysis.",
            "type": "array",
            "items": {
                "comment": "See software_version.json for a list of available identifiers.",
                "type": "string",
                "linkTo": "software_version"
            }
        },
        "input_file_types": {
            "title": "Input file types",
            "description": "The file types used as input for the analysis.",
            "type": "array",
            "default": [],
            "items": {
                "title": "Input file type",
                "description": "A file type used as input for the analysis.",
                "type": "string",
                "enum": [
                    "BAM",
                    "SAM",
                    "fastq",
                    "tagAlign",
                    "narrowPeak",
                    "broadPeak",
		    "tsv",
		    "csv"
                ]
            }
        },
        "output_file_types": {
            "title": "Output file types",
            "description": "The file types generated as output for the analysis.",
            "type": "array",
            "default": [],
            "items": {
                "title": "Output file type",
                "description": "A file type generated as output for the analysis.",
                "type": "string",
                "enum": [
                    "BAM",
                    "SAM",
                    "tagAlign",
                    "narrowPeak",
                    "broadPeak",
                    "bigWig",
		    "postScript"
                ]
            }
        },
        "reference_set_types": {
            "title": "Reference set types",
            "description": "The reference set types required for the analysis.",
            "type": "array",
            "default": [],
            "items": {
                "title": "Reference set type",
                "description": "A reference set type required for the analysis.",
                "type": "string",
                "enum": [
                    "assembly"
                ]
            }
        },
        "qa_stats_generated": {
            "title": "QA statistics",
            "description": "The QA statistics generated by the analysis.",
            "type": "array",
            "default": [],
            "items": {
                "title": "QA statistic",
                "description": "A QA statistic generated by the analysis.",
                "type": "string"
            }
        },
        "key_software": {
            "title": "Primary software",
            "description": "The software that is the driving purpose in the analysis step.",
            "type": "string",
            "linkTo": "software_version"
        },
        "key_parameters": {
            "title": "Key parameters",
            "description": "The parameters used by the primary software used in the analysis.",
            "type": "string"
        },
        "command_line": {
            "title": "Command line",
            "description": "The exact commands executed for the analysis.",
            "type": "string"
        },
        "version": {
            "title": "Version",
            "description": "The version of a particular analysis,",
            "comment": "Increments with each change to the software used in the analysis." ,
            "type": "integer"
        }
    }
}
