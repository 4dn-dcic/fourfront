{
    "title": "Workflow Run",
    "description": "Schema for submitting metadata on the executation of a computational analysis workflow run.",
    "id": "/profiles/workflow_run.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "required": ["workflow"],
    "additionalProperties": false,
    "identifyingProperties": ["uuid", "aliases"],
    "mixinProperties": [
        { "$ref": "mixins.json#/schema_version" },
        { "$ref": "mixins.json#/aliases" },
        { "$ref": "mixins.json#/uuid" },
        { "$ref": "mixins.json#/documents" },
        { "$ref": "mixins.json#/attribution" },
        { "$ref": "mixins.json#/notes"}
    ],
    "properties": {
        "schema_version": {
            "default": "1"
        },
        "title": {
            "title": "Title",
            "description": "The preferred viewable name of the run of the workflow.",
            "type": "string"
        },
        "description": {
            "title": "Description",
            "description": "A plain text description of the task.",
            "type": "string"
        },
        "input_files": {
            "title": "Input files",
            "description": "The files used as initial input for the workflow.",
            "type": "array",
            "items": {
                "title": "Input file mapping",
                "description": "Info on file used as input and mapping to CWL argument for the workflow.",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "workflow_argument_name": {
                        "title": "Workflow argument name",
                        "description": "the name of the argument of the workflow that corresponds to the input file",
                        "type": "string"
                    },
                    "value": {
                        "title": "Input file",
                        "comment": "for both this and the output file you are linking to a file object but you have titled the field 'Input file ID'?",
                        "comment": "just want to be sure you aren't trying to add a specific 7bg or some other id here - if so another property will need to be added, if not change title back to Input File I think",
                        "description": "a specified input file",
                        "type": "string",
                        "linkTo": "File"
                    }
                }
            }
        },
        "output_files": {
            "title": "Output files",
            "description": "All files that are saved as output of the workflow",
            "type": "array",
            "items": {
                "title": "Output file mapping",
                "description": "Info on file output by the workflow and how it is mapped to CWL arguments.",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "workflow_argument_name": {
                        "title": "Workflow argument name",
                        "description": "the name of the argument of the workflow that corresponds to the output file",
                        "type": "string"
                    },
                    "value": {
                        "title": "Output file",
                        "description": "a specified output file",
                        "type": "string",
                        "linkTo": "File"
                    }
                }
            }
        },
        "parameters": {
            "title": "parameters",
            "description": "Parameters of the workflow run",
            "type": "array",
            "items": {
                "title": "Parameter",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "workflow_argument_name": {
                        "title": "Workflow argument name",
                        "description": "the name of the argument of the workflow that corresponds to the parameter",
                        "type": "string"
                    },
                    "value": {
                        "title": "Value",
                        "description": "a specified value for the specified parameter as used in a task",
                        "comment": "can we specify either number or string?",
                        "type": "string"
                    },
                    "software_parameter": {
                        "title": "Parameter name",
                        "description": "the name or flag of the parameter as passed to the software",
                        "type": "string"
                    }
                }
            }
        },
        "workflow": {
            "title": "Workflow",
            "description": "The workflow that was run.",
            "type": "string",
            "linkTo": "Workflow"
        },
        "run_status": {
            "title": "Status",
            "type": "string",
            "default": "waiting",
            "enum" : [
                "waiting",
                "incomplete",
                "complete",
                "error"
            ]
        }
    }
}
