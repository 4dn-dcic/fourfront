{
    "title": "Report",
    "id": "/profiles/report.json",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "required": ["timestamp"],
    "additionalProperties": false,
    "identifyingProperties": ["uuid", "timestamp"],
    "mixinProperties": [
        { "$ref": "mixins.json#/schema_version" },
        { "$ref": "mixins.json#/uuid" },
        { "$ref": "mixins.json#/aliases" },
        { "$ref": "mixins.json#/submitted" }
    ],
    "properties": {
        "schema_version": {
            "default": "1"
        },
        "status": {
            "title": "Status",
            "type": "string",
            "default": "released",
            "enum" : [
                "released",
                "deleted"
            ]
        },
        "severity": {
            "title": "Severity",
            "description": "Integer severity from 0 (least severe) to 3 (most severe)",
            "type": "integer"
        },
        "summary": {
            "title": "Summary",
            "type": "string",
            "description": "String summary for report display."
        },
        "report_items": {
            "title": "Report Items",
            "description": "Array of objects representing items within the report.",
            "type": "array",
            "default": [],
            "items": {
                "title": "Report Item",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "primary_id":{
                        "title": "Experiment",
                        "type": "string",
                        "description": "linkTo for the primary object of the report.",
                        "anyOf": [
                            {"linkTo": "ExperimentSetReplicate"}
                        ]
                    },
                    "secondary_id":{
                        "title": "Biological replicate number",
                        "type": "string",
                        "description": "linkTo of the secondary (explanatory) item of the report. May be the same as the primary",
                        "anyOf": [
                            {"linkTo": "ExperimentSetReplicate"},
                            {"linkTo": "Experiment"},
                            {"linkTo": "File"}
                        ]
                    }
                }
            }
        },
        "parameters": {
            "title": "Report Parameters",
            "description": "Any string parameters used to generate the report",
            "type": "array",
            "default": [],
            "uniqueItems": true,
            "items": {
                "title": "Parameter",
                "description": "In form field=value",
                "type": "string"
            }
        },
        "comments": {
            "title": "Comments",
            "type": "string",
            "description": "Any wrangler comments on the report to be displayed"
        },
        "timestamp": {
            "title": "Timestamp",
            "type": "string",
            "comment": "Date can be submitted as YYYY-MM-DD or YYYY-MM-DDTHH:MM:SSTZD (TZD is the time zone designator; use Z to express time in UTC or for time expressed in local time add a time zone offset from UTC +HH:MM or -HH:MM).",
            "description": "Time the report was created; if from Foursight, will equal to uuid of the check that generated it.",
            "type": "string",
            "anyOf": [
                {"format": "date-time"},
                {"format": "date"}
            ]
        },
        "new_data_bound": {
            "title": "Timestamp",
            "type": "string",
            "comment": "Date can be submitted as YYYY-MM-DD or YYYY-MM-DDTHH:MM:SSTZD (TZD is the time zone designator; use Z to express time in UTC or for time expressed in local time add a time zone offset from UTC +HH:MM or -HH:MM).",
            "description": "Upper/newer timestamp of data used to create the report.",
            "type": "string",
            "anyOf": [
                {"format": "date-time"},
                {"format": "date"}
            ]
        },
        "old_data_bound": {
            "title": "Timestamp",
            "type": "string",
            "comment": "Date can be submitted as YYYY-MM-DD or YYYY-MM-DDTHH:MM:SSTZD (TZD is the time zone designator; use Z to express time in UTC or for time expressed in local time add a time zone offset from UTC +HH:MM or -HH:MM).",
            "description": "Lower/older timestamp of data used to create the report.",
            "type": "string",
            "anyOf": [
                {"format": "date-time"},
                {"format": "date"}
            ]
        }
    },
    "facets" : {
        "parameters" : {
            "title" : "Report Parameters"
        },
        "severity" : {
            "title" : "Report Severity"
        }
    }
}
